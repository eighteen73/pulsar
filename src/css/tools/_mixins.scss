@use "../settings" as *;
@use "sass:map";
@use "sass:list";

/// Adjusts the `--wp--custom--layout--content` css variable,
/// which is used for the container per breakpoint.
/// This lets the container behave like Tailwind, where it
/// snaps to sizes at breakpoints.
/// This should be used on the `<body>` tag.
@mixin container-sizes($sizes...) {
	@each $size in $sizes {
		$breakpoint: map.get($breakpoints, $size);

		@media (--#{$size}) {
			--wp--custom--layout--content: #{$breakpoint};
		}
	}
}

/// This recreates what WordPress adds to blocks
/// when a block is layout constrained.
/// This recreates the `has-global-padding` and `is-layout-constrained`
/// classes and should be applied to the parent element.
@mixin container() {
	padding-left: var(--wp--style--root--padding-left);
	padding-right: var(--wp--style--root--padding-right);

	> :where(:not(.alignleft):not(.alignright):not(.alignfull)) {
		margin-left: auto;
		margin-right: auto;
		max-width: var(--wp--style--global--content-size);
	}
}

/// Add styles for dark mode.
/// Can target both prefers-color-scheme, and
/// via a data attribute on the body.
@mixin dark() {
	@media (prefers-color-scheme: dark) {
		@content;
	}

	[data-mode="dark"] & {
		@content;
	}
}

/// Makes an element visually hidden, but still accessible to keyboards and assistive devices.
/// @link http://snook.ca/archives/html_and_css/hiding-content-for-accessibility
/// @link http://hugogiraudel.com/2016/10/13/css-hide-and-seek/
///
/// @param {Boolean} $enforce - Use `!important` on applied properties
///
@mixin hide-visually($enforce: false) {
	$important: if($enforce, "!important", null);

	border: 0 #{$important};
	clip: rect(1px, 1px, 1px, 1px) #{$important};
	clip-path: inset(50%) #{$important};
	height: 1px #{$important};
	overflow: hidden #{$important};
	padding: 0 #{$important};
	white-space: nowrap #{$important};
	width: 1px #{$important};
	word-wrap: normal #{$important};
	z-index: 100000; // Above WP toolbar
}

/// This reverses `hide-visually()`.
///
/// @param {Boolean} $enforce - Use `!important` on applied properties.
///
@mixin show-visually($enforce: false) {
	$important: if($enforce, "!important", null);

	clip: auto #{$important};
	clip-path: none #{$important};
	height: auto #{$important};
	overflow: visible #{$important};
	text-decoration: none;
	white-space: normal #{$important};
	width: auto #{$important};
	z-index: 0;
}

/// This mixin is used to apply the button styles to a button.
/// It is used in the core button styles.
/// It is also used in the WooCommerce Product block.
@mixin button($color: var(--wp--custom--color--base), $background: var(--wp--custom--color--contrast)) {
	align-items: center;
	background-color: $background;
	border: none;
	border-radius: 0;
	border-radius: 50px;
	box-shadow: none;
	color: $color;
	cursor: pointer;
	display: inline-flex;
	font-size: inherit;
	justify-content: center;
	line-height: inherit;
	padding: var(--wp--preset--spacing--sm) var(--wp--preset--spacing--xl);
	position: relative;
	text-align: center;
	transition: all var(--wp--custom--transition-duration--quick);

	&:hover {
		opacity: 0.8;
	}
}
